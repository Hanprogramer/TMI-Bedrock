{
    "namespace": "tmi_common",
    "slot_button_bg@common.button": {
        "layer": 2,
        "controls": [
            {
                "default": {
                    "type": "image",
                    "texture": "textures/ui/item_cell"
                }
            },
            {
                "hover": {
                    "type": "image",
                    "texture": "textures/ui/slot_disabled_hover"
                }
            },
            {
                "pressed": {
                    "type": "image",
                    "texture": "textures/ui/item_cell"
                }
            }
        ]
    },
    "slot_button": {
        "type": "panel",
        "size": [
            18,
            18
        ],
        "$tmi_recipe_index|default": -1,
        "$tmi_slot_id|default": -1,
        "$tmi_is_result_slot": false,
        "controls": [
            {
                "slot_bg@tmi_common.slot_button_bg": {
                    "$pressed_button_name": "tmi_slot_pressed",
                    "property_bag": {
                        "#tmi_recipe_index": "$tmi_recipe_index",
                        "#tmi_slot_id": "$tmi_slot_id",
                        "#tmi_is_result_slot": "$tmi_is_result_slot"
                    },
                    "bindings": [
                        {
                            "binding_type": "collection_details",
                            "binding_collection_name": "container_items"
                        },
                        {
                            "binding_name": "#collection_index",
                            "binding_type": "collection",
                            "binding_collection_name": "container_items"
                        },
                        {
                            "binding_type": "view",
                            "source_property_name": "#collection_index",
                            "target_property_name": "#tmi_slot_id"
                        }
                    ],
                    "button_mappings": [
                        // Trigger this button if it's right clicked
                        {
                            "from_button_id": "button.menu_secondary_select",
                            "to_button_id": "tmi_slot_pressed_secondary",
                            "mapping_type": "pressed"
                        },
                        {
                            "from_button_id": "button.menu_select",
                            "to_button_id": "tmi_slot_pressed",
                            "mapping_type": "pressed"
                        }
                    ]
                }
            },
            {
                "0": {
                    "type": "custom",
                    "renderer": "tmi_recipe_slot_renderer",
                    "size": [
                        18,
                        18
                    ],
                    "layer": 3,
                    "$cell_index": "#tmi_slot_id",
                    "property_bag": {
                        "#tmi_recipe_index": "$tmi_recipe_index",
                        "#tmi_slot_id": "$tmi_slot_id",
                        "#tmi_is_result_slot": "$tmi_is_result_slot",
                        "#tmi_recipe_type": "$tmi_recipe_type"
                    },
                    "bindings": [
                        {
                            "binding_type": "collection_details",
                            "binding_collection_name": "container_items"
                        },
                        {
                            "binding_name": "#collection_index",
                            "binding_type": "collection",
                            "binding_collection_name": "container_items"
                        },
                        {
                            "binding_type": "view",
                            "source_property_name": "#collection_index",
                            "target_property_name": "#tmi_slot_id"
                        }
                    ]
                }
            }
        ]
    },
    "overlay_slot_bg@common.button": {
        "layer": 2,
        "controls": [
            {
                "default": {
                    "type": "panel"
                }
            },
            {
                "hover": {
                    "type": "image",
                    "texture": "textures/ui/slot_disabled_hover"
                }
            },
            {
                "pressed": {
                    "type": "panel"
                }
            }
        ]
    },
    "overlay_slot": {
        "type": "panel",
        "size": [
            18,
            18
        ],
        "$tmi_slot_id|default": -1,
        "controls": [
            {
                "slot_bg@tmi_common.overlay_slot_bg": {
                    "property_bag": {
                        "#tmi_slot_id": "$tmi_slot_id"
                    },
                    "bindings": [
                        {
                            "binding_type": "collection_details",
                            "binding_collection_name": "item_grid"
                        },
                        {
                            "binding_name": "#collection_index",
                            "binding_type": "collection",
                            "binding_collection_name": "item_grid"
                        },
                        {
                            "binding_type": "view",
                            "source_property_name": "#collection_index",
                            "target_property_name": "#tmi_slot_id"
                        }
                    ],
                    "button_mappings": [
                        // Trigger this button if it's right clicked
                        {
                            "from_button_id": "button.menu_secondary_select",
                            "to_button_id": "tmi_overlay_slot_pressed_secondary",
                            "mapping_type": "pressed"
                        },
                        {
                            "from_button_id": "button.menu_select",
                            "to_button_id": "tmi_overlay_slot_pressed",
                            "mapping_type": "pressed"
                        }
                    ]
                }
            },
            {
                "0": {
                    "type": "custom",
                    "renderer": "tmi_overlay_slot_renderer",
                    "size": [
                        18,
                        18
                    ],
                    "layer": 3,
                    "property_bag": {
                        "#tmi_slot_id": "$tmi_slot_id"
                    },
                    "bindings": [
                        {
                            "binding_type": "collection_details",
                            "binding_collection_name": "item_grid"
                        },
                        {
                            "binding_name": "#collection_index",
                            "binding_type": "collection",
                            "binding_collection_name": "item_grid"
                        },
                        {
                            "binding_type": "view",
                            "source_property_name": "#collection_index",
                            "target_property_name": "#tmi_slot_id"
                        }
                    ]
                }
            }
        ],
        // "visible": "(#tmi_slot_id < 4)",
        "bindings": [
            // {
            //     "binding_type": "collection_details",
            //     "binding_collection_name": "item_grid"
            // },
            // {
            //     "binding_name": "#collection_index",
            //     "binding_type": "collection",
            //     "binding_collection_name": "item_grid"
            // },
            // {
            //     "binding_type": "view",
            //     "source_property_name": "#collection_index",
            //     "target_property_name": "#tmi_slot_id"
            // },
            // {
            //     "binding_type": "view", // make this a viewing binding
            //     "source_property_name": "(#collection_index < #tmi_visible_slot_count)", // detect when the title text string is not equal to "hello world"
            //     "target_property_name": "#visible" // override the #visibility property depending on if "source_property_name" is true or false
            // }
        ]
    },
    "slot_item_template@tmi_common.slot_button": {
        "$item_collection_name": "container_items"
    },
    "overlay_item_template@tmi_common.overlay_slot": {
        "$item_collection_name": "item_grid"
    },
    "tmi_tab_bg@common.button": {
        "layer": 2,
        "size": [
            28,
            28
        ],
        "property_bag": {
            "#tab_index": "$tab_index"
        },
        "$pressed_button_name": "tmi_tab_pressed",
        "controls": [
            {
                "default": {
                    "type": "image",
                    "texture": "textures/ui/TabTopFront"
                }
            },
            {
                "hover": {
                    "type": "image",
                    "texture": "textures/ui/TabTopFrontHover"
                }
            },
            {
                "pressed": {
                    "type": "image",
                    "texture": "textures/ui/TabTopFront"
                }
            }
        ],
        // "visible": "($tab_index = #tmi_current_tab)",
        "bindings": [
            {
                "binding_type": "view",
                "source_property_name": "(#tab_index = #tmi_current_tab)",
                "target_property_name": "#visible"
            },
            {
                "binding_name": "#tmi_current_tab"
            }
        ],
        "button_mappings": [
            // Trigger this button if it's right clicked
            {
                "from_button_id": "button.menu_secondary_select",
                "to_button_id": "tmi_tab_pressed",
                "mapping_type": "pressed"
            },
            {
                "from_button_id": "button.menu_select",
                "to_button_id": "tmi_tab_pressed",
                "mapping_type": "pressed"
            }
        ]
    },
    "tmi_tab_bg_inactive@common.button": {
        "layer": 1,
        "size": [
            28,
            28
        ],
        "property_bag": {
            "#tab_index": "$tab_index"
        },
        "$pressed_button_name": "tmi_tab_pressed",
        "controls": [
            {
                "default": {
                    "type": "image",
                    "texture": "textures/ui/TabTopBack"
                }
            },
            {
                "hover": {
                    "type": "image",
                    "texture": "textures/ui/TabTopBackHover"
                }
            },
            {
                "pressed": {
                    "type": "image",
                    "texture": "textures/ui/TabTopBack"
                }
            }
        ],
        "button_mappings": [
            // Trigger this button if it's right clicked
            {
                "from_button_id": "button.menu_secondary_select",
                "to_button_id": "tmi_tab_pressed",
                "mapping_type": "pressed"
            },
            {
                "from_button_id": "button.menu_select",
                "to_button_id": "tmi_tab_pressed",
                "mapping_type": "pressed"
            }
        ]
    },
    "tmi_tab": {
        "type": "panel",
        "size": [
            32,
            32
        ],
        "$tab_index|default": -1,
        "controls": [
            {
                "bg@tmi_common.tmi_tab_bg": {
                    "layer": 2
                }
            },
            {
                "bg@tmi_common.tmi_tab_bg_inactive": {
                    "layer": 1
                }
            },
            {
                "itemRenderer": {
                    "type": "custom",
                    "renderer": "tmi_tab_icon_renderer",
                    "size": [
                        18,
                        18
                    ],
                    "offset" : [0, -1],
                    "layer": 10,
                    "property_bag": {
                        "#tab_index": "$tab_index"
                    }
                }
            }
        ]
    }
}